{"ast":null,"code":"export const cleanupUndefinedKeys = async arr => {\n  const returnArr = [];\n\n  for (let i = 0; i < arr.length; i++) {\n    // clone object so as to not directly mutate state\n    const newObj = { ...arr[i]\n    };\n\n    for (let key in newObj) {\n      // exclude nested obj and irrelevant keys\n      if ((key === 'email' || key === 'username' || key === 'roles') && (newObj[key] === undefined || newObj[key] === '')) {\n        if (key !== 'roles') {\n          newObj[key] = null; // because 'roles' is an array, set to empty array rather than null\n        } else newObj[key] = [];\n      } else if (key === 'profile' && (newObj[key] === undefined || newObj[key] === '')) {\n        // checks nested keys\n        for (let profileKey in newObj[key]) {\n          if ((profileKey === 'name' || profileKey === 'about' || profileKey === 'dob' || profileKey === 'address' || profileKey === 'company') && (newObj[key][profileKey] === undefined || newObj[key][profileKey] === '')) {\n            newObj[key][profileKey] = null;\n          }\n        }\n      }\n    } // if date format is also good, update style to remove error color\n\n\n    if (hasCorrectFormat(newObj['profile']['dob'])) {\n      newObj.formatted = {\n        color: 'black'\n      };\n    }\n\n    returnArr.push(newObj);\n  }\n\n  ;\n  return returnArr;\n};\n\nconst hasCorrectFormat = date => {\n  let dateArr;\n\n  if (date.includes('-')) {\n    dateArr = date.split('-'); // this would be MM-DD or YYYY-MM or similar\n\n    if (dateArr.length !== 3) {\n      return false; // this would be non-ISO standards that still do use -\n    } else if (dateArr[0].length !== 4 || dateArr[1].length !== 2 || dateArr[2].length !== 2) {\n      return false;\n    } else return true; // formats with / are incorrect\n\n  } else if (date.includes('/')) {\n    return false;\n  } else return false;\n};\n\nexport const cleanDates = async arr => {\n  const returnArr = [];\n\n  for (let i = 0; i < arr.length; i++) {\n    // clone object so as to not directly mutate state\n    const newObj = { ...arr[i]\n    };\n    const dob = newObj.profile.dob;\n\n    if ((dob !== undefined || dob !== '') && hasCorrectFormat(dob) === false) {\n      // could refactor this with a separator param and switch statement\n      if (dob.includes('-')) {\n        const dobArr = dob.split('-'); // this logic would depend on what sort of formats are in the data, but works for our given data structure\n\n        newObj.profile.dob = `${dobArr[2]}-${dobArr[0]}-${dobArr[1]}`;\n      } else if (dob.includes('/')) {\n        const dobArr = dob.split('/'); // checks for different date string formats\n\n        if (dobArr[0].length === 4) {\n          newObj.profile.dob = `${dobArr[0]}-${dobArr[1]}-${dobArr[2]}`;\n        } else if (dobArr[2].length === 4) {\n          newObj.profile.dob = `${dobArr[2]}-${dobArr[0]}-${dobArr[1]}`;\n        } else {\n          console.warn(`Setting to null due to unconvertable date. Please reset at user level.`);\n          newObj.profile.dob = null;\n        }\n      } else if (dob.includes(' ')) {\n        const dobArr = dob.split(' '); // switch statement for checking month string\n\n        switch (dobArr[0]) {\n          case \"January\" || \"January,\":\n            dobArr[0] = \"01\";\n            break;\n\n          case \"February\" || \"February,\":\n            dobArr[0] = \"02\";\n            break;\n\n          case \"March\" || \"March,\":\n            dobArr[0] = \"03\";\n            break;\n\n          case \"April\" || \"April,\":\n            dobArr[0] = \"04\";\n            break;\n\n          case \"May\" || \"May,\":\n            dobArr[0] = \"05\";\n            break;\n\n          case \"June\" || \"June,\":\n            dobArr[0] = \"06\";\n            break;\n\n          case \"July\" || \"July,\":\n            dobArr[0] = \"07\";\n            break;\n\n          case \"August\" || \"August,\":\n            dobArr[0] = \"08\";\n            break;\n\n          case \"September\" || \"September,\":\n            dobArr[0] = \"09\";\n            break;\n\n          case \"October\" || \"October,\":\n            dobArr[0] = \"10\";\n            break;\n\n          case \"November\" || \"November,\":\n            dobArr[0] = \"11\";\n            break;\n\n          case \"December\" || \"December,\":\n            dobArr[0] = \"12\";\n            break;\n\n          default:\n            console.warn(`Hit default case for month, setting DOB to null due to unconvertable date. Please reset at user level.`);\n            newObj.profile.dob = null;\n            break;\n        } // trims off comma from Month Day, Year\n\n\n        newObj.profile.dob = `${dobArr[2]}-${dobArr[0]}-${dobArr[1]}`.replace(',', '');\n      } else {\n        console.warn(`DOB is in unconvertable format, setting to null. Please reset at user level.`);\n        newObj.profile.dob = null;\n      }\n    } // updates style to remove error color\n\n\n    newObj.formatted = {\n      color: 'black'\n    };\n    returnArr.push(newObj);\n  }\n\n  ;\n  return returnArr;\n};","map":{"version":3,"sources":["/Users/keirankozlowski/BloomTech-Repos/Unit-1/Code-Alongs/web-code-along-user-data-management/src/utils/data-clean.js"],"names":["cleanupUndefinedKeys","arr","returnArr","i","length","newObj","key","undefined","profileKey","hasCorrectFormat","formatted","color","push","date","dateArr","includes","split","cleanDates","dob","profile","dobArr","console","warn","replace"],"mappings":"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","sourcesContent":["export const cleanupUndefinedKeys = async (arr) => {\n    const returnArr = [];\n    \n    for(let i = 0; i < arr.length; i++) {\n        // clone object so as to not directly mutate state\n        const newObj = {...arr[i]};\n        for(let key in newObj) {\n            // exclude nested obj and irrelevant keys\n            if((key === 'email' || key === 'username' || key === 'roles') && (newObj[key] === undefined || newObj[key] === '')) {\n                if(key !== 'roles') {\n                    newObj[key] = null;\n                    // because 'roles' is an array, set to empty array rather than null\n                } else newObj[key] = [];\n            } else if(key === 'profile' && (newObj[key] === undefined || newObj[key] === '')) {\n                // checks nested keys\n                for(let profileKey in newObj[key]) {\n                    if((profileKey === 'name' || profileKey === 'about' || profileKey === 'dob' || profileKey === 'address' || profileKey === 'company') && (newObj[key][profileKey] === undefined || newObj[key][profileKey] === '')) {\n                        newObj[key][profileKey] = null;\n                    }\n                }\n            }\n        }\n\n        // if date format is also good, update style to remove error color\n        if(hasCorrectFormat(newObj['profile']['dob'])) {\n            newObj.formatted = { color: 'black' };\n        }\n        returnArr.push(newObj);\n    };\n\n    return returnArr;\n}\n\nconst hasCorrectFormat = (date) => {\n    let dateArr;\n    if(date.includes('-')) {\n        dateArr = date.split('-');\n\n        // this would be MM-DD or YYYY-MM or similar\n        if(dateArr.length !== 3) {\n            return false;\n            // this would be non-ISO standards that still do use -\n        } else if(dateArr[0].length !== 4 || dateArr[1].length !== 2 || dateArr[2].length !== 2) {\n            return false;\n        } else return true;\n        // formats with / are incorrect\n    } else if(date.includes('/')) {\n        return false;\n    } else return false;\n}\n\nexport const cleanDates = async (arr) => {\n    const returnArr = [];\n    \n    for(let i = 0; i < arr.length; i++) {\n        // clone object so as to not directly mutate state\n        const newObj = {...arr[i]};\n        const dob = newObj.profile.dob;\n\n        if((dob !== undefined || dob !== '') && hasCorrectFormat(dob) === false) {\n            // could refactor this with a separator param and switch statement\n            if(dob.includes('-')) {\n                const dobArr = dob.split('-');\n\n                // this logic would depend on what sort of formats are in the data, but works for our given data structure\n                newObj.profile.dob = `${dobArr[2]}-${dobArr[0]}-${dobArr[1]}`;\n            } else if(dob.includes('/')) {\n                const dobArr = dob.split('/');\n\n                // checks for different date string formats\n                if(dobArr[0].length === 4) {\n                    newObj.profile.dob = `${dobArr[0]}-${dobArr[1]}-${dobArr[2]}`;\n                } else if(dobArr[2].length === 4) {\n                    newObj.profile.dob = `${dobArr[2]}-${dobArr[0]}-${dobArr[1]}`;\n                } else {\n                    console.warn(`Setting to null due to unconvertable date. Please reset at user level.`);\n                    newObj.profile.dob = null;\n                }\n            } else if(dob.includes(' ')) {\n                const dobArr = dob.split(' ');\n\n                // switch statement for checking month string\n                switch (dobArr[0]) {\n                    case \"January\" || \"January,\":\n                      dobArr[0] = \"01\";\n                      break;\n                    case \"February\" || \"February,\":\n                      dobArr[0] = \"02\";\n                      break;\n                    case \"March\" || \"March,\":\n                      dobArr[0] = \"03\";\n                      break;\n                    case \"April\" || \"April,\":\n                      dobArr[0] = \"04\";\n                      break;\n                    case \"May\" || \"May,\":\n                      dobArr[0] = \"05\";\n                      break;\n                    case \"June\" || \"June,\":\n                      dobArr[0] = \"06\";\n                      break;\n                    case \"July\" || \"July,\":\n                      dobArr[0] = \"07\";\n                      break;\n                    case \"August\" || \"August,\":\n                      dobArr[0] = \"08\";\n                      break;\n                    case \"September\" || \"September,\":\n                      dobArr[0] = \"09\";\n                      break;\n                    case \"October\" || \"October,\":\n                      dobArr[0] = \"10\";\n                      break;\n                    case \"November\" || \"November,\":\n                      dobArr[0] = \"11\";\n                      break;\n                    case \"December\" || \"December,\":\n                      dobArr[0] = \"12\";\n                      break;\n                    default:\n                        console.warn(`Hit default case for month, setting DOB to null due to unconvertable date. Please reset at user level.`);\n                        newObj.profile.dob = null;\n                        break;\n                }\n\n                // trims off comma from Month Day, Year\n                newObj.profile.dob = `${dobArr[2]}-${dobArr[0]}-${dobArr[1]}`.replace(',', '');\n            } else {\n                console.warn(`DOB is in unconvertable format, setting to null. Please reset at user level.`);\n                newObj.profile.dob = null;\n            }\n        }\n\n        // updates style to remove error color\n        newObj.formatted = { color: 'black' };\n        returnArr.push(newObj);\n    };\n    \n    return returnArr;\n}\n"]},"metadata":{},"sourceType":"module"}